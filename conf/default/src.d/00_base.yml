site: default

common:
  domain: &domain m2.local
  gateway: &gateway 192.168.155.254
  netmask: &netmask 255.255.255.0
  nameservers:
  - hostname: *gateway
    #options:
  - hostname: 8.8.8.8

  storage_pools:
    - type: dir
      name: default
      target:
        path: /var/lib/libvirt/images

  disks:
    - pool: default  # see `storage_pools`
      format: qcow2
      cache: none
      size: 6
      bus: scsi
    #- path: /var/lib/libvirt/images/<vm>-disk-0.raw
    #  format: raw
    #  size: 10  # [GB]

  swap: 512  # [MB]
  filesystem: ext4
  auth:
    options: "--passalgo=sha512"

  selinux: enforcing
  ks_finish: poweroff

  timezone:
    utc: true
    timezone: Asia/Tokyo

  # template cond variables:
  use_serial_console: true
  store_cmdline: true

  #ntpservers:
    # TODO: set default NTP servers.
    # - hostname: 0.pool.ntp.org
    #   options: ...

  services:
    #enabled:
    disabled:
      - gpm
      - ip6tables
      - lvm2-monitor
      - lvm2-lvmetad
      - mdmonitor
      - netfs

  ssh:
    pubkey: ~/.ssh/id_rsa.pub

  cluster:
    # software bridge for inter cluster nodes communication:
    bridge: virbr0

  virtinst:
    ram: 512
    vcpus: 1
    basic_options: --check-cpu --hvm --accelerate --noreboot --noautoconsole
    connect: "qemu:///system"
    waittime: 12
    arch: x86_64
    graphics: vnc
    os_type: linux
    os_variant: rhel6
    # FIXME: Is there generic URL which will be automatically redirected to
    # suitable mirrors to perform kickstart installation, available for CentOS ?
    #location: "ftp://ftp.iij.ad.jp/pub/linux/centos/6.5/os/x86_64/"
    #location: "ftp://ftp.riken.jp/Linux/centos/6.5/os/x86_64/"
    location: "ftp://ftp.kddilabs.jp/Linux/packages/CentOS/6.5/os/x86_64/"

  ## Meta:
  templates:
    #autoinst:
      #src: autoinstall.d/<name>-ks.cfg
      #dst: ks.cfg
    virtinst:
      src: guest/vmbuild.sh
      dst: vmbuild.sh
    netregist:
      src: guest/net_register.sh
      dst: net_register.sh
    Makefile:
      src: guest/Makefile
      dst: Makefile

  guests_templates:
    Makefile_am:
      src: guest/rpm/Makefile.am
      dst: Makefile.am

    configure_ac:
      src: guest/rpm/configure.ac
      dst: configure.ac

    rpmspec:
      src: guest/rpm/package.spec
      dst: package.spec

    rpmmk:
      src: guest/rpm/rpm.mk
      dst: rpm.mk

networks:
  - name: default  # libvirt's default virtual (NAT) network
    mode: nat
    bridge: virbr0
    domain: example.com
    gateway: 192.168.122.1
    netmask: 255.255.255.0
    network: 192.168.122.0
    dhcp:
      start: 192.168.122.200
      end: 192.168.122.254
      static:
        start: 192.168.122.10
        end: 192.168.122.199

  - name: service
    mode: nat
    bridge: &net_service_bridge virbr5
    domain: *domain
    gateway: *gateway
    netmask: *netmask
    network: 192.168.155.0
    dhcp:
      start: 192.168.155.200
      end: 192.168.155.250
      static:
        start: 192.168.155.10
        end: 192.168.155.199

  - name: openstack-private
    mode: nat
    bridge: virbr100
    domain: os.local
    gateway: 192.168.160.254
    netmask: 255.255.255.0
    network: 192.168.160.0
    dhcp:
      start: 192.168.160.200
      end: 192.168.160.250
      static:
        start: 192.168.160.2
        end: 192.168.160.100

host:
  bridge: *net_service_bridge


# vim:sw=2:ts=2:et:
