<network>
  <name>{{ name }}</name>
  {% if mode in ('nat', 'bridge') %}<forward mode='{{ mode }}'/>{% endif %}
  <bridge name='{{ bridge|default("virbr10") }}' stp='on' delay='0' />
  {% if domain is defined %}<domain name='{{ domain }}'/>{% endif %}
  <dns>
    <!-- Libvirt host aliases: -->
    <host ip='{{ gateway }}'><hostname>gw.{{ domain }}</hostname></host>
    <host ip='{{ gateway }}'><hostname>ks.{{ domain }}</hostname></host>
    <!-- TODO: Parameterize the followings and get from config files -->
    <host ip='192.168.155.100'><hostname>rhel-5-cluster.{{ domain }}</hostname></host>
    <host ip='192.168.155.110'><hostname>rhel-6-cluster.{{ domain }}</hostname></host>
{% for h in hosts|sort(attribute="mac") %}    <host ip='{{ h.ip }}'><hostname>{{ h.fqdn }}</hostname></host>
{% endfor %}  </dns>
  <ip address='{{ gateway }}' netmask='{{ netmask|default("255.255.255.0") }}'>
{% if dhcp is defined %}    <dhcp>
      <range start='{{ dhcp.start }}' end='{{ dhcp.end }}'/>
{% for h in hosts|sort(attribute="mac") %}      <host mac='{{ h.mac }}' {% if h.fqdn is defined %}name='{{ h.fqdn }}'{% endif %} ip='{{ h.ip }}'/>
{% endfor %}    </dhcp>{% endif %}
  </ip>
</network>
